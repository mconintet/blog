##Execute

`execute` 命令用于评定一个字符串是否是一个 Vimscript 命令。我们在之前的章节中看过它了，但是现在我们知道了一些更多关于 Vimscript 字符串，我们将再看一看它。

##基础执行

运行下面的命令：

```vim
:execute "echom 'Hello, world!'"
```

Vim 评估 `echom 'Hello, world!'` 是一个命令，然后忠实的将结果输出到了屏幕并添加到了消息日志。Execute 是一个非常强大的命令，它使得你可以使用字符串去创建命令。

让我们试一个更有用的例子。先使用 Vim 打开一个文件，然后在打开的文件的窗口中运行 `:edit foo.txt` 去打开一个新的缓冲区。运行下面的命令：

```vim
:execute "rightbelow vsplit " . bufname("#")
```

Vim 将在第二个文件的右边打开第一个文件。其中发生了什么？

首先，Vim 通过连接字符串 `"rightbelow vsplit "` 和 `bufname("#")` 的调用结果去创建一个命令。

我们之后将会更多的了解函数的意义，不过现在只要相信函数的返回值就是上一个缓冲区的路径。如果你想亲自看看的话，可以通过 `echom` 去试一试。

一旦连接完成的话，Vim 会评估类似 `"rightbelow vsplit bar.txt"`。`execute` 命令会将其当做一个 Vimscript 命令去执行，意思就是使用分隔窗口的方式去打开文件。

##Execute 危险吗？

在大部分语言中，将输入的字符串当做程序代码去执行的方式（比如 "eval"），是一件令人皱眉的事情。Vimscript 的 `execute` 命令没有这个问题，这有两点原因。

首先，大部分的 Vimscript 只从单个人那里接收输入：就是用户自己。如果用户输入了一个狡猾的字符串引起了一些不好的结果，没事，那是他们自己的电脑！将此联系到其他语言，程序需要随时的从不信任的用户那里接收输入。Vim 是一个独立环境，所以一般的安全问题不是很明显。

第二个原因是因为 Vimscript 有一些晦涩的狡猾的语法，execute 通常是最简单最直观的去完成一些事情的方式。在其他语言中使用 "eval" 通常不会节约多少输入，但是在 Vimscript 中，它可以将多行变成一行。

##练习

浏览下 `:help execute` 然后想一想你不能用 `execute` 做什么。现在不用太过深入 -- 我们很快会回顾它。

阅读 `:help leftabove`，`:help rightbelow`，`:help :split` 和 `:help :vsplit`（注意最后两个主题中的冒额外的号）

在你的 `~/.vimrc` 中添加一个映射，可以使得你选择如果打开上一个缓冲区的内容（垂直/水平，上/下/左/右）。
